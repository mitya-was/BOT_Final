# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—é –Ω–∞ VPS

## üìã **–ü–µ—Ä–µ–¥—É–º–æ–≤–∏:**

### **–°–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏:**
- Ubuntu/Debian/CentOS —Å–µ—Ä–≤–µ—Ä
- Node.js >= 16.0.0
- npm >= 8.0.0
- PM2 (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
- Git

### **–î–æ—Å—Ç—É–ø–∏:**
- SSH –¥–æ—Å—Ç—É–ø –¥–æ VPS
- Telegram Bot Token
- Google Apps Script Web App URL + API Key

---

## üîß **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:**

### **1Ô∏è‚É£ –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É:**
```bash
# –ù–∞ VPS —Å–µ—Ä–≤–µ—Ä—ñ
git clone https://github.com/your-username/was-contract-bot.git
cd was-contract-bot
```

### **2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç—É —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:**
```bash
# –ù–∞–¥–∞—Ç–∏ –ø—Ä–∞–≤–∞ –Ω–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
chmod +x deploy-vps.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
./deploy-vps.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
- ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚úÖ –ù–∞–ª–∞—à—Ç—É—î .env —Ñ–∞–π–ª
- ‚úÖ –ó—É–ø–∏–Ω–∏—Ç—å —Å—Ç–∞—Ä–∏–π –±–æ—Ç
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤–∏–π –±–æ—Ç
- ‚úÖ –ù–∞–ª–∞—à—Ç—É—î –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

### **3Ô∏è‚É£ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env:**
```bash
cd telegram-bot
nano .env
```

–í—Å—Ç–∞–≤–∏—Ç–∏ –≤–∞—à—ñ –¥–∞–Ω—ñ:
```env
TELEGRAM_BOT_TOKEN=1234567890:AAGhnyEswcHCVvwxwpBzeQIH58vALOpT1HA
TELEGRAM_CHAT_ID=156212174
GOOGLE_SCRIPT_URL=https://script.google.com/macros/s/AKfycbx.../exec
API_KEY=a7f89c2d-4e5b-6c8a-9d3f-1e7b4a6c8d9e
```

### **4Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞:**
```bash
pm2 restart was-contract-bot-v2
```

---

## üìä **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –±–æ—Ç–æ–º:**

### **PM2 –∫–æ–º–∞–Ω–¥–∏:**
```bash
# –°—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤
pm2 status

# –õ–æ–≥–∏ –±–æ—Ç–∞
pm2 logs was-contract-bot-v2

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart was-contract-bot-v2

# –ó—É–ø–∏–Ω–∫–∞
pm2 stop was-contract-bot-v2

# –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É
pm2 delete was-contract-bot-v2

# –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
pm2 monit
```

### **–õ–æ–≥–∏ –±–æ—Ç–∞:**
```bash
# –õ–æ–≥–∏ —á–µ—Ä–µ–∑ PM2
pm2 logs was-contract-bot-v2 --lines 50

# –õ–æ–≥–∏ –±–æ—Ç–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ)
tail -f telegram-bot/logs/bot-$(date +%Y-%m-%d).log

# –í—Å—ñ –ª–æ–≥–∏ –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ
cat telegram-bot/logs/bot-$(date +%Y-%m-%d).log
```

---

## üîç **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:**

### **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–∏—Å—Ç–µ–º–∏:**
```bash
# –í Telegram –±–æ—Ç—ñ
/health

# –ß–µ—Ä–µ–∑ curl (—è–∫—â–æ —î Web App)
curl "$GOOGLE_SCRIPT_URL?action=health&key=$API_KEY"
```

### **–ß–∞—Å—Ç—ñ –ø—Ä–æ–±–ª–µ–º–∏:**

1. **–ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:**
   ```bash
   # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ .env —Ñ–∞–π–ª
   cat telegram-bot/.env
   
   # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫
   pm2 logs was-contract-bot-v2 --err --lines 20
   ```

2. **API –ø–æ–º–∏–ª–∫–∏:**
   ```bash
   # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Google Apps Script URL
   curl -I "$GOOGLE_SCRIPT_URL"
   
   # –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API –∫–ª—é—á
   echo $API_KEY
   ```

3. **–ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø–∞–º'—è—Ç—Ç—é:**
   ```bash
   # –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å—ñ–≤
   pm2 monit
   
   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—ñ –ø–∞–º'—è—Ç—ñ
   pm2 restart was-contract-bot-v2
   ```

---

## üîÑ **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç–∞:**

### **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É:**
```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç
pm2 stop was-contract-bot-v2

# –û–Ω–æ–≤–∏—Ç–∏ –∫–æ–¥ –∑ GitHub
git pull origin main

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –Ω–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —î)
cd telegram-bot && npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç
pm2 start was-contract-bot-v2
```

### **Rollback –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–µ—Ä—Å—ñ—ó:**
```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ –Ω–æ–≤–∏–π –±–æ—Ç
pm2 stop was-contract-bot-v2

# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –∑ backup
rm -rf telegram-bot
mv telegram-bot-backup telegram-bot

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π –±–æ—Ç
cd telegram-bot
pm2 start bot.js --name was-contract-bot-v1
```

---

## üìà **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è:**

### **–©–æ–¥–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
pm2 status

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é –≥–æ–¥–∏–Ω—É
pm2 logs was-contract-bot-v2 --lines 100
```

### **–©–æ—Ç–∏–∂–Ω–µ–≤—ñ –∑–∞–≤–¥–∞–Ω–Ω—è:**
```bash
# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä–∏—Ö –ª–æ–≥—ñ–≤ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω—ñ–≤)
find telegram-bot/logs/ -name "*.log" -mtime +7 -delete

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–∞–º'—è—Ç—ñ
pm2 restart was-contract-bot-v2
```

### **–†–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è:**
```bash
# Backup –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
tar -czf backup-$(date +%Y%m%d).tar.gz telegram-bot/.env telegram-bot/logs/

# Backup –Ω–∞ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
scp backup-$(date +%Y%m%d).tar.gz user@backup-server:/backups/
```

---

## üîê **–ë–µ–∑–ø–µ–∫–∞:**

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
1. **–ù—ñ–∫–æ–ª–∏ –Ω–µ commit—Ç–µ .env —Ñ–∞–π–ª–∏ –≤ Git**
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç—É–π—Ç–µ API –∫–ª—é—á—ñ**
3. **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ firewall –¥–ª—è –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É**
4. **–ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—ñ–¥–æ–∑—Ä—ñ–ª—É –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**

### **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è firewall:**
```bash
# –î–æ–∑–≤–æ–ª–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ SSH —Ç–∞ HTTPS
ufw allow ssh
ufw allow https
ufw enable
```

---

## üìû **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞:**

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. –õ–æ–≥–∏ PM2: `pm2 logs was-contract-bot-v2`
2. –õ–æ–≥–∏ –±–æ—Ç–∞: `tail -f telegram-bot/logs/bot-*.log`
3. –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏: `/health` –≤ Telegram
4. –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å Google Apps Script

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–æ –ø—Ä–æ–¥–∞–∫—à–Ω—É! üéâ**
